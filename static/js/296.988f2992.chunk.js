"use strict";(self.webpackChunkhering=self.webpackChunkhering||[]).push([[296],{1552:(e,t,n)=>{n.d(t,{M:()=>m});var a=n(9060),i=n(12),l=n(7248),r=n(7880),s=n(9500),o=n(6584),c=n(220);const d=(0,r.c)("div",{target:"e1u372t20"})({name:"q4ncab",styles:"border:1px solid black;border-radius:4px;display:flex;padding:10px;p{padding:0 10px;margin:0;}"});function u(e){const{content:t}=e;return(0,c.im)(d,null,(0,c.im)("div",null,(0,c.im)(s.u,{icon:o.eUn})),t)}const m={blockquote(e){let{children:t}=e;return(0,c.im)(u,{content:t})},a(e){let{node:t,children:n,...r}=e;const s=(0,a.useContext)(l.Y),o=r.href,d=null===o||void 0===o?void 0:o.match("\\$(.*)\\$");if(d){const e=s.find((e=>e.key==d[1]));return e?e.link?(0,c.im)("a",{href:e.link,target:"_blank",rel:"noreferrer"},n):e.slug?(0,c.im)(i.cH,{to:"/"+e.slug},n):(0,c.im)(i.cH,{to:r.href||""},n):(0,c.im)(i.cH,{to:r.href||""},n)}const u=null===o||void 0===o?void 0:o.match("(mailto:)");return u&&u.length>2&&u[1]?(0,c.im)(i.cH,{to:"#",onClick:e=>{window.location.href=r.href||"",e.preventDefault()}},n):(0,c.im)(i.cH,{to:r.href||""},n)},img(e){let{node:t,children:n,...a}=e;const i=a.alt,l=null===i||void 0===i?void 0:i.match("alt: (.*), (size: ((\\d*)x(\\d*)))?(width: (\\d*))?");return l?l[7]?(0,c.im)("img",{src:a.src,alt:l[1],width:l[7]}):(0,c.im)("img",{src:a.src,alt:l[1],width:l[4],height:l[5]}):(0,c.im)("img",{src:a.src,alt:a.alt})}}},5296:(e,t,n)=>{n.r(t),n.d(t,{default:()=>F});var a=n(9060),i=n(9500),l=n(3148),r=n(9516),s=n(1552),o=n(9204),c=n(232),d=n(12),u=n(3352),m=n(220);const g=function(e){const{t:t}=(0,o.Gy)(),n=e.targets.map((e=>e.rolle)).join(", "),a=e.responsible.map((e=>t("target.role.".concat(e.rolle)))).join(", "),i=e.chapters.map((e=>(0,m.im)("li",{key:e.slug},(0,m.im)(d.cH,{to:"/"+e.section.slug+"#"+e.slug},e.title))));return(0,m.im)("tr",null,(0,m.im)("td",null,(0,u.E9)(e.deadline,"dd.MM.yyyy")),(0,m.im)("td",null,e.title),(0,m.im)("td",null,a),(0,m.im)("td",null,n),(0,m.im)("td",null,(0,m.im)("ul",null,i)))};const p=function(e){const t=e.tasks,{t:n}=(0,o.Gy)(),a=t.map((function(e){return(0,m.im)(g,{deadline:e.deadline,key:e.title,title:e.title,targets:e.targets,responsible:e.responsible,chapters:e.chapters})}));return(0,m.im)("div",{className:"calendar-table"},(0,m.im)("table",null,(0,m.im)("thead",null,(0,m.im)("tr",null,(0,m.im)("td",{id:"when"},n("calendarPage.table.when")),(0,m.im)("td",{id:"what"},n("calendarPage.table.what")),(0,m.im)("td",{id:"who"},n("calendarPage.table.who")),(0,m.im)("td",{id:"target"},n("calendarPage.table.target")),(0,m.im)("td",{id:"chapters"},n("calendarPage.table.chapters")))),(0,m.im)("tbody",null,a)))};var f=n(2888),h=n(7112),w=n(9568),v=n(7584),b=n(6584);function P(e){return e.chapters.map((e=>e.slug_with_section)).join(",")}function y(e){return e.chapters.map((e=>"https://scout-ch.github.io/hering/"+e.slug_with_section)).join(",")}const k=function(e){var t;const{t:l}=(0,o.Gy)(),[r,s]=(0,a.useState)();if((0,a.useEffect)((()=>{(async()=>{if(!e.tasks||0===e.tasks.length)return void s("");const t=await async function(e,t){const a=n(6664),i=e.map((function(e){const n=e.deadline,a=[];return a.push({action:"display",description:P(e),trigger:{hours:1,before:!0}}),{start:[n.getFullYear(),n.getMonth()+1,n.getDate()],end:[n.getFullYear(),n.getMonth()+1,n.getDate()],title:"".concat(t," ").concat(e.title),description:y(e),url:y(e),status:"CONFIRMED",busyStatus:"FREE",alarms:a}}));return new Promise(((e,t)=>{a.createEvents(i,((n,a)=>{if(n)return void t(n);if(!a)return void t("invalid ics value");const i=new Blob([a],{type:"text/calendar"}),l=window.URL.createObjectURL(i);e(l)}))}))}(e.tasks,e.calendarTitlePrefix);s(t)})()}),[e.tasks,e.calendarTitlePrefix]),!r||0===r.length)return(0,m.im)("div",null);const c=(null!==(t=e.calendarTitlePrefix)&&void 0!==t?t:"").length>0?e.calendarTitlePrefix+" ":"";return(0,m.im)("a",{className:"download-btn",id:"ics-download",download:l("calendarPage.ics.filename",{calendarTitlePrefix:c}),href:r},(0,m.im)(i.u,{icon:b.ycF}),l("calendarPage.ics.download"))};function x(e){return e.chapters.map((e=>"https://scout-ch.github.io/hering/"+e.slug_with_section)).join(", ")}const S=function(e){var t;const{t:n}=(0,o.Gy)(),[l,r]=(0,a.useState)();if((0,a.useEffect)((()=>{(()=>{if(!e.tasks||0===e.tasks.length)return void r("");const t=(e=>{let t="".concat(n("calendarPage.table.when"),",").concat(n("calendarPage.table.what"),",").concat(n("calendarPage.table.who"),",").concat(n("calendarPage.table.target"),",").concat(n("calendarPage.table.chapters"),"\n");e.forEach((e=>{const a=e.responsible.map((e=>n("target.role.".concat(e.rolle)))).join(", "),i=e.targets.map((e=>e.rolle)).join(", "),l=[(0,u.E9)(e.deadline,"yyyy-MM-dd"),'"'.concat(e.title,'"'),'"'.concat(a,'"'),'"'.concat(i,'"'),'"'.concat(x(e),'"')].join(",");t+=l+"\n"}));const a=new Blob([t],{type:"text/csv;charset=utf-8;"});return URL.createObjectURL(a)})(e.tasks);r(t)})()}),[e.tasks,e.calendarTitlePrefix,n]),!l||0===l.length)return(0,m.im)("div",null);const s=(null!==(t=e.calendarTitlePrefix)&&void 0!==t?t:"").length>0?e.calendarTitlePrefix+" ":"";return(0,m.im)("a",{className:"download-btn",id:"csv-download",download:n("calendarPage.csv.filename",{calendarTitlePrefix:s}),href:l},(0,m.im)(i.u,{icon:b.M3O}),n("calendarPage.csv.download"))},I="yyyy-MM-dd",T=(0,u.E9)(Date.now(),I),E="all",C="start-date",M="responsible",N="buffer",j="calendar-prefix";const D=function(){const{t:e}=(0,o.Gy)(),[t,n]=(0,a.useState)(T),[i,l]=(0,a.useState)(E),[r,s]=(0,a.useState)(0),[d,u]=(0,a.useState)(""),[g,b]=(0,a.useState)([]),[P,y]=(0,a.useState)([]),x=(0,a.useCallback)((e=>{null===e||void 0===e||e.preventDefault();const n=(0,h.K0)(t,I,Date.now()),a=g.filter((e=>{const t=e.responsible.map((e=>e.rolle));return"all"===i||t.includes(i)})).map((e=>{const t=e.days<0?e.days-r:e.days;return{deadline:-1e3!==e.days?(0,w.K)((0,v.A)(n,t)):new Date(n.getFullYear(),0,1),title:e.title,targets:e.targets,responsible:e.responsible,chapters:e.chapters}})).sort(((e,t)=>e.deadline.getTime()-t.deadline.getTime()));y(a)}),[t,i,r,g]);return(0,a.useEffect)((()=>{x()}),[x]),(0,a.useEffect)((()=>{(()=>{const e=window.sessionStorage.getItem(C);n(e||T);const t=window.sessionStorage.getItem(M);l(t||E);const a=window.sessionStorage.getItem(N);s(parseInt(a||"")||0);const i=window.sessionStorage.getItem(j);u(i||"")})(),(async()=>{const e=await f.c.get("/tasks?_locale="+c.c.language);b(e.data)})()}),[]),(0,m.im)("div",null,(0,m.im)("div",{className:"calendar-form-container"},(0,m.im)("form",null,(0,m.im)("ul",{className:"calendar-form"},(0,m.im)("li",null,(0,m.im)("label",null,e("calendarPage.startDate")),(0,m.im)("input",{type:"date",name:"startDate",value:t,onChange:e=>{const t=e.currentTarget.value;n(t),window.sessionStorage.setItem(C,t)}})),(0,m.im)("li",null,(0,m.im)("label",null,e("calendarPage.responsible")),(0,m.im)("select",{name:"responsible",id:"responsible",value:i,onChange:e=>{const t=e.currentTarget.value;l(t),window.sessionStorage.setItem(M,t)}},(0,m.im)("option",{value:"all"},e("calendarPage.responsibleOptions.all")),(0,m.im)("option",{value:"LL"},e("calendarPage.responsibleOptions.ll")),(0,m.im)("option",{value:"AL"},e("calendarPage.responsibleOptions.al")),(0,m.im)("option",{value:"C"},e("calendarPage.responsibleOptions.c")))),(0,m.im)("hr",null),(0,m.im)("li",null,(0,m.im)("label",null,e("calendarPage.puffer")),(0,m.im)("input",{type:"number",id:"puffer",name:"puffer",value:r.toString(),onChange:e=>{const t=parseInt(e.currentTarget.value)||0;s(t),window.sessionStorage.setItem(N,t.toString())}})),(0,m.im)("li",null,(0,m.im)("label",null,e("calendarPage.prefixPlaceholder")),(0,m.im)("div",null,(0,m.im)("input",{type:"text",name:"calendar-prefix",value:d,onChange:e=>{const t=e.currentTarget.value;u(t),window.sessionStorage.setItem(j,t)}}),(0,m.im)("div",{className:"calendar-title-prefix-hint"},e("calendarPage.prefixPreview",{calendarTitlePrefix:d})))),(0,m.im)("li",null,window.sessionStorage.getItem(C)||window.sessionStorage.getItem(M)||window.sessionStorage.getItem(N)||window.sessionStorage.getItem(j)?(0,m.im)("button",{className:"as-link",onClick:()=>{window.sessionStorage.removeItem(C),n(T),window.sessionStorage.removeItem(M),l(E),window.sessionStorage.removeItem(N),s(0),window.sessionStorage.removeItem(j),u("")}},e("calendarPage.resetValues")):(0,m.im)(a.Fragment,null))))),(0,m.im)("div",{className:"download-btn-group"},(0,m.im)(k,{tasks:P,calendarTitlePrefix:d}),(0,m.im)(S,{tasks:P,calendarTitlePrefix:d})),(0,m.im)(p,{tasks:P,prefix:d}))};const F=function(e){const t=e.page;return(0,a.useEffect)((()=>{document.title=t.title}),[t]),(0,m.im)("div",{className:"content-main"},(0,m.im)("div",{className:"calendar"},(0,m.im)("h1",null,(0,m.im)(i.u,{icon:b.ycF})," ",t.title),(0,m.im)(l.I,{remarkPlugins:[r.c],components:s.M},t.content),(0,m.im)(D,null)))}}}]);
//# sourceMappingURL=296.988f2992.chunk.js.map